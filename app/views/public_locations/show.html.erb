<div class="background" style="
background-color: <%= @bda.background_color %>;
font-family: '<%= @bda.font.name %>';
background-image: <%= @bda.background_image.attached? ? "url(#{url_for @bda.sized_background_image(size: 900)})" : 'none' %>;
background-repeat: <%= @bda.repeat? ? "repeat" : "no-repeat; background-size: cover"%>;"
>
<% if @bda.sized_business_icon %>
  <div class="business-banner">
    <%= list_image(@bda.business_icon, alt: "Image") %>
  </div>
<% end %>
  <div class="container" id="show-container" style="background-color: <%= @bda.foreground_rgba(@bda.foreground_color, @bda.foreground_opacity) %>;">
    <div id="show-title">
      <% if @business.locations.count > 1 %>
        <h1 class="show-header" style="color: <%= @bda.heading_color %>"><%= @location.name %></h1>
        <h5 class="show-sub-header" style="color: <%= @bda.heading_color %>"><%= @business.name %> Location</h5><br>
        <%= link_to "Back to #{@business.name}'s page", public_locations_path(@business.business_url), class: "btn custom-btn btn-primary btn-sm btn-custom", id: "back-button", style:"background-color: #{@bda.button_color}; border-color: #{@bda.button_color}; color: #{@bda.button_text_color}; text-align:left;" %>
      <% else %>
        <h1 class="show-header" style="color: <%= @bda.heading_color %>"><%= @business.name %></h1>
        <h5 class="show-header" style="color: <%= @bda.heading_color %>"><%= @location.name %></h5><br>
      <% end %>
    </div>
      <div class="row">
        <div class="col-xs-12 col-sm-12 <%= @location.location_images.blank? ? "col-md-12 col-lg-12" : "col-md-12 col-lg-6" %>">
          <div class="show-description" style="<%= @location.location_images.blank? && @business.locations.count < 2 ? "text-align:center;" : "" %> background-color: <%= @bda.card_background_color%>; border: 1px solid <%= @bda.card_border_color %>">
            <div class="card location-show-card" style="background-color: <%= @bda.card_background_color%>; border: none">
              <p style="color: <%= @bda.general_text_color %>">Address: <%= @location.address %></p>
              <% unless @location.open.blank? %>
                <p style="color: <%= @bda.general_text_color %>">Open: <%= @location.open %></p>
              <% end %>
              <% if !@location.phone_number.blank? %>
                <p style="color: <%= @bda.general_text_color %>">Phone Number: <%= @location.phone_number %></p>
              <% else %>
                <p style="color: <%= @bda.general_text_color %>">Phone Number: <%= @business.phone_number %></p>
              <% end %>
              <% if @business.locations.count < 2 %>
                <div id="b-description-p">
                  <span style="color:<%= @bda.general_text_color %>" data-trix-color><%= @business.description.html_safe%></span>
                </div>
              <% end %>
            </div> 
          </div>
        </div>

        <% unless @location.location_images.count == 0 %>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6">
            <div class="show-location-images">
              <div class="col">
                <div class="gallery">
                  <% if @location.location_images.count < 4 %>
                    <div class="row row-cols-3">
                      <% @location.location_images.each do |image| %>
                        <%= list_image(image.sized_image(size: 200), alt: 'Location Image') %>
                      <% end %>
                    </div>
                  <% else %>
                    <div class="row row-cols-3">
                      <% @location.location_images.each do |image| %>
                        <%= list_image(image.sized_image(size: 200), alt: 'Location Image') %>
                      <% end %>
                    </div>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>

      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6">
          <div class="pub-show-menus">
            <% if @location.location_menus %>
              <% @location.location_menus.each do |location_menu| %>
                <div class="card location-show-card" style="background-color: <%= @bda.card_background_color%>; border: 1px solid <%= @bda.card_border_color%>;">
                  <h5 class="card-title" style="color: <%= @bda.general_text_color %>"><%= location_menu.menu.display_name %></h5>
                  <div class="pub-menu-description">
                    <p style="color: <%= @bda.general_text_color %>"><%= location_menu.menu.description.html_safe %></p>
                  </div>
                  <%= link_to "View Menu", public_menu_path(@location.business.business_url, 
                                                            @location.location_url, 
                                                            location_menu.menu.menu_url), 
                                                            class: "btn custom-btn btn-primary btn-sm", style:"background-color: #{@bda.button_color}; border-color: #{@bda.button_color}; color: #{@bda.button_text_color}" %>
                </div>
              <% end %>
            <% end %>
          </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6">
          <div class="imap-location-show">
            <iframe id="imap" width="530" height="530" frameborder="0"
            src="https://www.google.com/maps/embed/v1/place?key=<%= ENV["MAPS_API_KEY"] %>&q=<%= @location.latitude %>,<%= @location.longitude %>"
            allowfullscreen>
            </iframe>
          </div>
        </div>
      </div>

  </div>
</div>
