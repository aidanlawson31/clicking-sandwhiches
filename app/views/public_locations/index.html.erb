<div class="background" style="
background-color:  <%= @bda.background_color %>;
font-family:      '<%= @bda.font.name %>';
background-image:  <%= @bda.background_image.attached? ? "url(#{url_for @bda.sized_background_image(size: 900)})" : 'none' %>;
background-repeat: <%= @bda.repeat? ? "repeat" : "no-repeat; background-size: cover" %>;"
>
  <div class="container" id="index-container" style="background-color: <%= @bda.foreground_rgba(@bda.foreground_color, @bda.foreground_opacity) %>">
    <% if @bda.sized_banner %>
      <div class="business-banner">
        <%= list_image(@bda.banner, alt: "Image") %>
      </div>
    <% end %>

    <% if @bda.sized_top_icon %>
      <div class="business-top-ico">
        <%= list_image(@bda.top_icon, alt: "Image") %>
      </div>
    <% end %>

    <h1 id="index-heading" style="color: <%= @bda.heading_color %>; font-family: <%= @bda.heading_font.name %>"><%= @business.name %></h1>
  
    <% if @bda.hero_image_or_video %>
      <% if @bda.sized_hero_image %>
        <div class="business-hero">
          <%= list_image(@bda.sized_hero_image(size: 90), alt: "Image") %>
        </div>
      <% end %>
    <% else %>
      <% if @bda.hero_video.attached? %>
        <div class="business-hero-video-container">
          <%= video_tag(url_for(@bda.hero_video), autoplay: 'true', loop: 'true', muted: 'true', id: 'business-hero-video' )%>
        </div>
      <% end %>
    <% end %>

    <div id="index-description" style="color: <%= @bda.general_text_color %> !important">
      <%= @business.description.html_safe %>
    </div> 
    <h3  id="index-description" style="color: <%= @bda.general_text_color %>">Locations</h3>
    <% unless @locations.empty? %>
      <% @locations.each do |location| %>
        <div class="card" style="margin:5px; background-color: <%= @bda.card_background_color %>; border: 1px solid <%= @bda.card_border_color%>">
          <div class="row" style="padding: 10px; width: 100%;">
            <div class="col" style="margin: 0.5rem;" >
              <% if location.location_images %>
                <% location.location_images.each do |image| %>
                  <%= list_image(image.sized_image(size: 100), alt: 'Location Image') %>
                <% end %>
              <% end %>
            </div>
            <div class="col">
              <h5 id="index-card" style="padding-top: 30px; color: <%= @bda.general_text_color %>"><%= location.name %></h5>
              <h5 id="index-card" style="margin-top: 5px; color: <%= @bda.general_text_color %>"><%= location.address %></h5>
              <% unless location.open.blank? %>
                <h5 id="index-card" style="margin-top: 5px; color: <%= @bda.general_text_color %>">open: <%= location.open %></h5>
              <% end %>
              <%= link_to "View location", public_location_path(@business.business_url, location.location_url), class: "btn btn-sm btn-primary custom-btn", style: "background-color: #{@bda.button_color}; border-color: #{@bda.button_color}; color: #{@bda.button_text_color}" %>
            </div>
            <div class="col">
              <iframe id="index-iframe" width="200" height="200" frameborder="0"
              src="https://www.google.com/maps/embed/v1/place?key=<%= ENV["MAPS_API_KEY"] %>&q=<%= location.latitude %>,<%= location.longitude %>"
              allowfullscreen>
              </iframe>
            </div>
          </div>
        </div>  
      <% end %>
    </div>
    <% else %>
      <p id="index-description"> <%= @business.name %> does not have any locations posted yet! <p>
    <% end %>
  </div>
</div>
